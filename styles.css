/* =========================================================
   CHURN - "OLD RPG UI" PASS (BG2 / Diablo / Morrowind-ish)
   - Hard corners, chunky frames, bevel stacks, low-tech gradients
   - No color-mix, no blur, no soft modern glass
   ========================================================= */

/* ====== THEME ====== */
:root{
  --bg0:#000000;
  --bg1:#060708;
  --bg2:#0b0d10;

  --screenEdge1:#2a240f;
  --screenEdge2:#0e0c06;

  --panelBody:#0b0d10;
  --panelBody2:#07090b;

  --gold1:#d2bf7a;
  --gold2:#a47f2a;
  --gold3:#3a2a0a;

  --line1:#2b2f36;
  --line2:#0b0c0e;

  --text:#d7deef;
  --muted:#8e9ab5;

  --serif: Georgia, "Times New Roman", Times, serif;
  --sans: Tahoma, Verdana, Arial, sans-serif;
  --mono: "Courier New", Courier, monospace;

  --wrap: 980px;
}

/* Optional lighter mode kept, but still “game UI” */
[data-theme="paper"]{
  --bg0:#0b0a07;
  --bg1:#12100c;
  --bg2:#1a1710;

  --panelBody:#14120c;
  --panelBody2:#0f0d08;

  --text:#efe7d5;
  --muted:#c4bca9;
}

/* ====== BASE ====== */
*{ box-sizing:border-box; }
html,body{ height:100%; }

body{
  margin:0;
  font-family: var(--sans);
  color: var(--text);
  line-height:1.35;

  /* Dark vignette + subtle noise (CSS-only) */
  background:
    radial-gradient(900px 520px at 50% 22%, #1a1c20 0%, #07080a 55%, #000 100%),
    radial-gradient(800px 520px at 20% 80%, rgba(130,110,50,0.14), transparent 60%),
    radial-gradient(800px 520px at 80% 70%, rgba(70,110,130,0.10), transparent 62%),
    linear-gradient(180deg, var(--bg1), var(--bg0));
}

/* noise overlay using SVG turbulence */
body::before{
  content:"";
  position:fixed; inset:0;
  pointer-events:none;
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='120' height='120' filter='url(%23n)' opacity='.10'/%3E%3C/svg%3E");
  opacity:.55;
  mix-blend-mode:overlay;
}

a{ color:inherit; text-decoration:none; }
a:hover{ text-decoration:none; filter:brightness(1.08); }

.wrap{ width:min(var(--wrap), calc(100% - 24px)); margin:0 auto; }

/* ====== SKIP LINK ====== */
.skip-link{
  position:absolute; left:-999px; top:12px;
  background:#000;
  color:#fff;
  padding:8px 10px;
  border:1px solid #444;
  z-index:999;
}
.skip-link:focus{ left:12px; }

/* ====== TOPBAR (make it look like a game menu strip) ====== */
.topbar{
  position:sticky; top:0; z-index:50;
  background: linear-gradient(#171a1f, #07090c);
  border-bottom: 1px solid #3a2a0a;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.06),
    inset 0 -1px 0 rgba(0,0,0,0.90);
}

.topbar-row{
  display:flex; align-items:center; justify-content:space-between;
  padding: 8px 0;
}

.brand{
  display:flex; align-items:center; gap:10px;
  font-weight:700;
  letter-spacing:1px;
  text-transform: uppercase;
}
.brand:hover{ filter:none; }

.brand-glyph{
  width:14px; height:14px;
  display:inline-block;
  border:1px solid #3f3313;
  background: linear-gradient(var(--gold1), var(--gold2), var(--gold3));
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.10),
    inset 0 -1px 0 rgba(0,0,0,0.80);
}

.brand-title{ font-size: 12px; }
.brand-sub{
  font-size: 11px;
  color: var(--muted);
  letter-spacing:1px;
}

.topbar-actions{ display:flex; gap:8px; align-items:center; }

/* Buttons in topbar should look like chunky game buttons */
.chip{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px;
  border:1px solid #2b2f36;
  background: linear-gradient(#1c2026, #07090c);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.06),
    inset 0 -1px 0 rgba(0,0,0,0.88),
    0 1px 0 rgba(0,0,0,0.60);
  font-size: 12px;
  letter-spacing: .5px;
  text-transform: none;
}
.chip:hover{ filter:brightness(1.08); }
.chip-btn{ cursor:pointer; font-family: var(--sans); color:inherit; }

.only-sm{ display:none; }
.hide-sm{ display:inline; }

/* ====== SCREEN FRAME (THIS is what makes it feel like a screenshot) ====== */
.screen{
  width:min(var(--wrap), calc(100% - 24px));
  margin: 18px auto 40px;

  /* outer “game viewport” frame */
  padding: 14px;
  background:
    linear-gradient(#0b0d10, #050607);
  border: 2px solid var(--screenEdge1);
  box-shadow:
    0 0 0 1px var(--screenEdge2),
    inset 0 1px 0 rgba(255,255,255,0.05),
    inset 0 -1px 0 rgba(0,0,0,0.90);
  position:relative;
}

.screen::after{
  /* faint inner grime */
  content:"";
  position:absolute; inset:10px;
  pointer-events:none;
  background:
    radial-gradient(320px 220px at 20% 30%, rgba(255,255,255,0.06), transparent 65%),
    radial-gradient(420px 260px at 80% 70%, rgba(0,0,0,0.35), transparent 70%);
  opacity:.55;
}

/* ====== LAYOUT ====== */
.layout{
  position:relative; /* sits above screen grime */
  z-index:1;

  display:grid;
  grid-template-columns: 280px 1fr 280px;
  gap: 12px;
  align-items:start;
}

.sidebar, .sidebar-right{ position:relative; }
.sticky{ position: sticky; top: 58px; }

/* ====== PANELS (the core old-RPG look) ====== */
.panel{
  position:relative;
  border-radius: 0px; /* HARD CORNERS */
  overflow:hidden;

  /* thick metallic border via border-box trick */
  border: 6px solid transparent;
  background:
    linear-gradient(var(--panelBody), var(--panelBody2)) padding-box,
    linear-gradient(var(--gold1), var(--gold2) 55%, var(--gold3)) border-box;

  box-shadow:
    inset 0 0 0 1px rgba(0,0,0,0.78),
    inset 1px 1px 0 rgba(255,255,255,0.06),
    inset -1px -1px 0 rgba(0,0,0,0.92),
    0 2px 0 rgba(0,0,0,0.75);
}

/* corner rivets (cheap but effective) */
.panel::before{
  content:"";
  position:absolute; inset:0;
  pointer-events:none;
  background:
    radial-gradient(circle at 10px 10px, rgba(0,0,0,0.85) 0 2px, rgba(255,255,255,0.10) 3px, transparent 4px),
    radial-gradient(circle at calc(100% - 10px) 10px, rgba(0,0,0,0.85) 0 2px, rgba(255,255,255,0.10) 3px, transparent 4px),
    radial-gradient(circle at 10px calc(100% - 10px), rgba(0,0,0,0.85) 0 2px, rgba(255,255,255,0.10) 3px, transparent 4px),
    radial-gradient(circle at calc(100% - 10px) calc(100% - 10px), rgba(0,0,0,0.85) 0 2px, rgba(255,255,255,0.10) 3px, transparent 4px);
  opacity:.85;
}

/* Titlebar inside the panel (looks like game “window chrome”) */
.panel-head{
  padding: 8px 10px;
  display:flex; align-items:center; justify-content:space-between; gap:10px;

  background: linear-gradient(#1a1e24, #07090c);
  border-bottom: 1px solid #3a2a0a;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.06),
    inset 0 -1px 0 rgba(0,0,0,0.90);
}

.panel-title{
  font-size: 12px;
  font-weight: 700;
  letter-spacing: 1px;
  text-transform: uppercase;
  text-shadow: 1px 1px 0 #000;
}

.panel-sub{
  font-size: 12px;
  color: var(--muted);
  letter-spacing: .2px;
}

.panel-body{
  padding: 10px;
  font-size: 13px;
}

/* Remove paper vibe: everything is “dark window” now */
.panel-paper{
  color: var(--text);
  border: 6px solid transparent;
  background:
    linear-gradient(var(--panelBody), var(--panelBody2)) padding-box,
    linear-gradient(var(--gold1), var(--gold2) 55%, var(--gold3)) border-box;
}

/* ====== TABS (chunky list buttons) ====== */
.tabs{ display:grid; gap:8px; padding: 10px; }

.tab{
  display:grid;
  grid-template-columns: 40px 1fr;
  gap:10px;
  align-items:center;

  padding: 9px 10px;
  border:1px solid #2b2f36;
  background: linear-gradient(#171a1f, #07090c);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.05),
    inset 0 -1px 0 rgba(0,0,0,0.92);
}

.tab:hover{ filter:brightness(1.08); }

.tab.is-active{
  border-color: #6f5620;
  background: linear-gradient(#2a2211, #0d0a05);
}

.tab-key{
  font-family: var(--mono);
  font-weight:700;
  font-size:12px;
  color:#d8c98a;
  text-shadow: 1px 1px 0 #000;
}

.tab-label{
  font-weight: 700;
  font-size: 13px;
  text-shadow: 1px 1px 0 #000;
}

/* ====== HUD NOTE ====== */
.hud-note{
  margin: 0 10px 10px;
  padding: 8px 10px;
  border:1px solid #2b2f36;
  background: linear-gradient(#111418, #060709);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.04),
    inset 0 -1px 0 rgba(0,0,0,0.92);
}

.hud-line{
  display:flex; justify-content:space-between;
  padding: 4px 0;
  color: var(--muted);
  font-size: 12px;
}

.hud-line strong{ color: var(--text); }
.mono{ font-family: var(--mono); }

/* ====== MANUAL HEAD (make it less modern/hero-ish) ====== */
.page{ min-width:0; }

.manual{ margin-top: 12px; }
.manual:first-child{ margin-top:0; }

.manual-head{
  padding: 14px 14px;
  border: 6px solid transparent;
  background:
    linear-gradient(var(--panelBody), var(--panelBody2)) padding-box,
    linear-gradient(var(--gold1), var(--gold2) 55%, var(--gold3)) border-box;
  box-shadow:
    inset 0 0 0 1px rgba(0,0,0,0.78),
    inset 1px 1px 0 rgba(255,255,255,0.06),
    inset -1px -1px 0 rgba(0,0,0,0.92);
}

.kicker{
  display:inline-block;
  padding: 4px 8px;
  border:1px solid #2b2f36;
  background: linear-gradient(#1a1e24, #07090c);
  font-size: 11px;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: var(--muted);
  text-shadow: 1px 1px 0 #000;
}

.manual-title{
  font-family: var(--serif);
  margin: 10px 0 6px;
  font-size: 40px; /* intentionally chunky like game title text */
  letter-spacing: 1px;
  text-transform: uppercase;
  text-shadow:
    2px 2px 0 #000,
    0 0 10px rgba(0,0,0,0.6);
}

.manual-subtitle{
  margin: 0 0 12px;
  color: var(--muted);
  max-width: 70ch;
  font-size: 13px;
}

.manual-cta{ display:flex; gap:8px; flex-wrap:wrap; margin-top: 6px; }

.manual-grid{
  margin-top: 12px;
  display:grid;
  grid-template-columns: 1.2fr 0.8fr;
  gap: 12px;
}

/* ====== BUTTONS (bevel, no rounding) ====== */
.btn{
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding: 8px 10px;

  border:1px solid #2b2f36;
  background: linear-gradient(#1c2026, #07090c);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.06),
    inset 0 -1px 0 rgba(0,0,0,0.92),
    0 1px 0 rgba(0,0,0,0.65);

  font-weight: 700;
  font-size: 12px;
  letter-spacing: 1px;
  text-transform: uppercase;
  text-shadow: 1px 1px 0 #000;
}

.btn:hover{ filter:brightness(1.10); }
.btn:active{
  box-shadow:
    inset 0 1px 0 rgba(0,0,0,0.85),
    inset 0 -1px 0 rgba(255,255,255,0.06);
  transform: translateY(1px);
}

.btn-primary{
  border-color:#6f5620;
  background: linear-gradient(#3a2f14, #120e06);
  color:#f0e3b3;
}

.btn-ghost{
  border-color:#2b2f36;
}

/* ====== POST TILE ====== */
.post-tile{
  display:flex; justify-content:space-between; gap:12px;
  padding: 10px;
  border:1px solid #2b2f36;
  background: linear-gradient(#0f1216, #07090c);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.04),
    inset 0 -1px 0 rgba(0,0,0,0.92);
}

.post-date{
  color: var(--muted);
  font-family: var(--mono);
  display:flex; gap:10px; align-items:center;
  font-size: 12px;
}

.dot{ opacity:0.6; }

.post-title{
  font-weight: 700;
  margin-top: 6px;
  text-shadow: 1px 1px 0 #000;
}

.post-excerpt{
  color: var(--muted);
  margin-top: 4px;
  font-size: 12px;
}

.tag{
  display:inline-flex;
  padding: 4px 8px;
  border:1px solid #6f5620;
  background: linear-gradient(#3a2f14, #120e06);
  font-family: var(--mono);
  font-weight:700;
  letter-spacing:1px;
  font-size: 11px;
  color:#f0e3b3;
  text-shadow: 1px 1px 0 #000;
}

.arrow{ font-size: 18px; opacity: 0.85; text-shadow: 1px 1px 0 #000; }
.row{ margin-top: 10px; display:flex; gap:8px; flex-wrap:wrap; }

/* ====== LINKS / CARDS ====== */
.linklist{ display:grid; gap:8px; }

.linkrow{
  display:grid;
  grid-template-columns: 28px 1fr auto;
  gap:10px;
  align-items:center;

  padding: 9px 10px;
  border:1px solid #2b2f36;
  background: linear-gradient(#171a1f, #07090c);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.04),
    inset 0 -1px 0 rgba(0,0,0,0.92);
}

.linkrow:hover{ filter:brightness(1.08); }
.link-ic{ opacity:0.95; }
.link-meta{ color: var(--muted); font-size: 12px; }

.grid{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
}

.cardbtn{
  padding: 10px;
  border:1px solid #2b2f36;
  background: linear-gradient(#171a1f, #07090c);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.04),
    inset 0 -1px 0 rgba(0,0,0,0.92),
    0 1px 0 rgba(0,0,0,0.65);
}

.cardbtn:hover{ filter:brightness(1.10); }
.cardbtn-title{ font-weight: 700; text-shadow: 1px 1px 0 #000; }

/* ====== RIGHT PANEL ====== */
.stat{ margin-bottom: 10px; }
.stat-label{ color: var(--muted); font-size: 12px; }
.stat-value{ font-weight: 700; margin-top: 3px; text-shadow: 1px 1px 0 #000; }

.meter{ margin: 10px 0; }
.meter-top{ display:flex; justify-content:space-between; align-items:center; }

.meter-bar{
  height: 10px;
  border:1px solid #2b2f36;
  background: linear-gradient(#0f1216, #07090c);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.03),
    inset 0 -1px 0 rgba(0,0,0,0.92);
  overflow:hidden;
  margin-top: 6px;
}

.meter-fill{
  height:100%;
  background: linear-gradient(#cbb46f, #6c4f16);
}

.divider{
  height:1px;
  background:#2b2f36;
  margin: 10px 0;
  box-shadow: 0 1px 0 rgba(0,0,0,0.7);
}

.mini{ display:grid; gap:8px; }
.mini-row{
  display:flex; justify-content:space-between;
  color: var(--muted);
  font-size: 12px;
}
.mini-row strong{ color: var(--text); text-shadow: 1px 1px 0 #000; }

.rulebox{
  margin-top: 10px;
  padding: 10px;
  border:1px dashed #4a3a16;
  background: linear-gradient(#0f1216, #07090c);
}

.rule-title{
  font-family: var(--mono);
  font-weight:700;
  letter-spacing:1px;
  text-transform: uppercase;
  margin-bottom: 6px;
  color:#d8c98a;
  text-shadow: 1px 1px 0 #000;
}

.muted{ color: var(--muted); }

.footer{ margin-top: 10px; }

/* ====== RESPONSIVE ====== */
@media (max-width: 1100px){
  .layout{ grid-template-columns: 260px 1fr; }
  .sidebar-right{ display:none; }
  .grid{ grid-template-columns: 1fr; }
  .manual-grid{ grid-template-columns: 1fr; }
}

@media (max-width: 820px){
  .layout{ grid-template-columns: 1fr; }
  .sidebar{ position: sticky; top: 52px; z-index: 40; }
  .only-sm{ display:inline-flex; }
  .hide-sm{ display:none; }

  /* Collapsible nav */
  .sidebar[data-open="false"] .panel{ display:none; }
}
